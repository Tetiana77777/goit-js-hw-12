{"version":3,"file":"commonHelpers.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["import axios from 'axios';\n\nexport default async function request(word, numberPage) {\n  const response = await axios.get('https://pixabay.com/api/', {\n    params: {\n      key: '42677735-fe61580d2fc9bff74664cab68',\n      q: word,\n      image_type: 'photo',\n      orientation: 'horizontal',\n      safesearch: true,\n      per_page: 15,\n      page: numberPage,\n    },\n  });\n  return response;\n}\n","export default function createContent({ data: { hits: arrImages } }) {\n  return arrImages\n    .map(\n      image =>\n        `<li class=\"gallary-item\">\n      <a class=\"gallary-item-link\" href=\"${image.largeImageURL}\"><img\n        class=\"gallary-image\"\n        src=\"${image.webformatURL}\"\n        alt=\"${image.tags}\"\n      /></a>\n         <ul class=\"info-list\">\n          <li class=\"info-list-item\">\n            <h2 class=\"list-item-title\">Likes</h2>\n            <p class=\"list-item-info\">${image.likes}</p>\n          </li>\n          <li class=\"info-box-list-item\">\n            <h2 class=\"list-item-title\">Views</h2>\n            <p class=\"list-item-info\">${image.views}</p>\n          </li>\n          <li class=\"info-box-list-item\">\n            <h2 class=\"list-item-title\">Comments</h2>\n            <p class=\"list-item-info\">${image.comments}</p>\n          </li>\n          <li class=\"info-box-list-item\">\n            <h2 class=\"list-item-title\">Downloads</h2>\n            <p class=\"list-item-info\">${image.downloads}</p>\n          </li>\n        </ul>\n       </li>`\n    )\n    .join('');\n}\n","import SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\n\nimport iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\n\nimport request from './js/pixabay-api';\nimport createContent from './js/render-functions';\n\nconst form = document.querySelector('.search-form');\nconst gallary = document.querySelector('.gallary');\nconst loadMoreBtn = document.querySelector('.load-more-btn');\nconst scrollTop = document.querySelector('.scroll-top');\n\nform.addEventListener('submit', handleSubmit);\nloadMoreBtn.addEventListener('click', loadMoreClick);\n\nwindow.addEventListener('scroll', function () {\n  if (pageYOffset < 75) {\n    scrollTop.classList.add('visually-hidden');\n    return;\n  }\n  scrollTop.classList.remove('visually-hidden');\n});\n\nlet numberPage;\nlet wordForSearch = '';\nlet lightbox;\n\nfunction handleSubmit(event) {\n  event.preventDefault();\n  wordForSearch = event.currentTarget.elements.input.value.trim();\n\n  if (!wordForSearch) {\n    event.currentTarget.elements.input.value = '';\n    iziToast.warning({\n      close: false,\n      position: 'topRight',\n      progressBar: false,\n      message: 'Enter a search word. Please try again!',\n    });\n    return;\n  }\n\n  numberPage = 1;\n  gallary.innerHTML = '';\n  gallary.insertAdjacentHTML('afterend', `<span class=\"loader\"></span>`);\n  loadMoreBtn.classList.add('visually-hidden');\n\n  request(wordForSearch, numberPage)\n    .then(response => {\n      if (response.data.hits.length === 0) {\n        gallary.nextElementSibling.remove();\n\n        iziToast.error({\n          close: false,\n          message:\n            'Sorry, there are no images matching your search query. Please try again!',\n          position: 'topRight',\n          progressBar: false,\n        });\n        return;\n      }\n      gallary.nextElementSibling.remove();\n      gallary.insertAdjacentHTML('beforeend', createContent(response));\n\n      lightbox = new SimpleLightbox('.gallary-item-link', {\n        captionsData: 'alt',\n        captionDelay: 250,\n      });\n\n      if (gallary.children.length < response.data.totalHits) {\n        loadMoreBtn.classList.remove('visually-hidden');\n      } else {\n        loadMoreBtn.classList.add('visually-hidden');\n        iziToast.info({\n          close: false,\n          message: \"We're sorry, but you've reached the end of search results.\",\n          position: 'topRight',\n          progressBar: false,\n        });\n      }\n    })\n    .catch(error => console.log(error));\n  form.reset();\n}\n\nfunction loadMoreClick(event) {\n  loadMoreBtn.classList.add('visually-hidden');\n  numberPage += 1;\n  gallary.insertAdjacentHTML('afterend', `<span class=\"loader\"></span>`);\n\n  request(wordForSearch, numberPage)\n    .then(response => {\n      gallary.nextElementSibling.remove();\n      gallary.insertAdjacentHTML('beforeend', createContent(response));\n      let scroll = gallary.firstChild.getBoundingClientRect().height;\n      window.scrollBy(0, 2 * scroll);\n\n      lightbox.refresh();\n\n      if (gallary.children.length < response.data.totalHits) {\n        loadMoreBtn.classList.remove('visually-hidden');\n      } else {\n        loadMoreBtn.classList.add('visually-hidden');\n        iziToast.info({\n          close: false,\n          message: \"We're sorry, but you've reached the end of search results.\",\n          position: 'topRight',\n          progressBar: false,\n        });\n      }\n    })\n    .catch(error => console.log(error));\n}\n"],"names":["request","word","numberPage","axios","createContent","arrImages","image","form","gallary","loadMoreBtn","scrollTop","handleSubmit","loadMoreClick","wordForSearch","lightbox","event","iziToast","response","SimpleLightbox","error","scroll"],"mappings":"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"}